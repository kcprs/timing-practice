<?xml version="1.0" encoding="UTF-8" standalone="no" ?><w:document xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main"><w:body><w:p><w:pPr><w:pStyle w:val="code"/></w:pPr><w:r><w:t><![CDATA[classdef timingPractice < matlab.apps.AppBase

    % Properties that correspond to app components
    properties (Access = public)
        UIFigure                   matlab.ui.Figure
        TabGroup                   matlab.ui.container.TabGroup
        MainTab                    matlab.ui.container.Tab
        EarlyLampLabel             matlab.ui.control.Label
        EarlyLamp                  matlab.ui.control.Lamp
        OKLampLabel                matlab.ui.control.Label
        OKLamp                     matlab.ui.control.Lamp
        LateLampLabel              matlab.ui.control.Label
        LateLamp                   matlab.ui.control.Lamp
        StartButton                matlab.ui.control.Button
        TimingGauge                matlab.ui.control.LinearGauge
        StopButton                 matlab.ui.control.Button
        PracticeOptionsPanel       matlab.ui.container.Panel
        TempoBPMEditFieldLabel     matlab.ui.control.Label
        TempoField                 matlab.ui.control.NumericEditField
        DurationminEditFieldLabel  matlab.ui.control.Label
        DurationField              matlab.ui.control.NumericEditField
        ResultsTab                 matlab.ui.container.Tab
        TimingPlot                 matlab.ui.control.UIAxes
        PlayheadSlider             matlab.ui.control.Slider
        NextOnsetButton            matlab.ui.control.Button
        PreviousOnsetButton        matlab.ui.control.Button
        PreviousTickButton         matlab.ui.control.Button
        NextTickButton             matlab.ui.control.Button
        ResultsTextAreaLabel       matlab.ui.control.Label
        ResultsTextArea            matlab.ui.control.TextArea
        SettingsTab                matlab.ui.container.Tab
        SystemSettingsPanel        matlab.ui.container.Panel
        SampleRateDropDownLabel    matlab.ui.control.Label
        SampleRateDropDown         matlab.ui.control.DropDown
        BufferSizeDropDownLabel    matlab.ui.control.Label
        BufferSizeDropDown         matlab.ui.control.DropDown
        MeasureAudioLagButton      matlab.ui.control.Button
    end

    
    properties (Access = public)
        session;
        player;
        deviceReader;
        
        playheadLoc;
        playheadPlot;
    end
    

    methods (Access = private)

        % Code that executes after component creation
        function startupFcn(app)
            initialise(app);
        end

        % Button pushed function: StartButton
        function StartButtonPushed(app, event)
            app.session.runPractice(app);
        end

        % Button pushed function: StopButton
        function StopButtonPushed(app, event)
            app.session.stopPractice(app);
        end

        % Value changed function: PlayheadSlider
        function PlayheadSliderValueChanged(app, event)
            movePlayhead(app, app.PlayheadSlider.Value * app.session.fs * app.TimingPlot.XLim(2));
        end

        % Button pushed function: NextOnsetButton
        function NextOnsetButtonPushed(app, event)
            movePlayheadTo('next', 'onset', app);
        end

        % Button pushed function: PreviousOnsetButton
        function PreviousOnsetButtonPushed(app, event)
            movePlayheadTo('previous', 'onset', app);
        end

        % Button pushed function: PreviousTickButton
        function PreviousTickButtonPushed(app, event)
            movePlayheadTo('previous', 'tick', app);
        end

        % Button pushed function: NextTickButton
        function NextTickButtonPushed(app, event)
            movePlayheadTo('next', 'tick', app);
        end

        % Button pushed function: MeasureAudioLagButton
        function MeasureAudioLagButtonPushed(app, event)
            app.session.measureAudioLag(app);
        end
    end

    % App initialization and construction
    methods (Access = private)

        % Create UIFigure and components
        function createComponents(app)

            % Create UIFigure
            app.UIFigure = uifigure;
            app.UIFigure.Position = [100 100 1163 750];
            app.UIFigure.Name = 'UI Figure';

            % Create TabGroup
            app.TabGroup = uitabgroup(app.UIFigure);
            app.TabGroup.Position = [1 1 1163 750];

            % Create MainTab
            app.MainTab = uitab(app.TabGroup);
            app.MainTab.Title = 'Main';

            % Create EarlyLampLabel
            app.EarlyLampLabel = uilabel(app.MainTab);
            app.EarlyLampLabel.HorizontalAlignment = 'right';
            app.EarlyLampLabel.Position = [94 573 33 22];
            app.EarlyLampLabel.Text = 'Early';

            % Create EarlyLamp
            app.EarlyLamp = uilamp(app.MainTab);
            app.EarlyLamp.Position = [142 492 183 183];
            app.EarlyLamp.Color = [0.902 0.902 0.902];

            % Create OKLampLabel
            app.OKLampLabel = uilabel(app.MainTab);
            app.OKLampLabel.HorizontalAlignment = 'right';
            app.OKLampLabel.Position = [457 572 25 22];
            app.OKLampLabel.Text = 'OK';

            % Create OKLamp
            app.OKLamp = uilamp(app.MainTab);
            app.OKLamp.Position = [497 492 181 181];
            app.OKLamp.Color = [0.902 0.902 0.902];

            % Create LateLampLabel
            app.LateLampLabel = uilabel(app.MainTab);
            app.LateLampLabel.HorizontalAlignment = 'right';
            app.LateLampLabel.Position = [810 572 29 22];
            app.LateLampLabel.Text = 'Late';

            % Create LateLamp
            app.LateLamp = uilamp(app.MainTab);
            app.LateLamp.Position = [854 492 181 181];
            app.LateLamp.Color = [0.902 0.902 0.902];

            % Create StartButton
            app.StartButton = uibutton(app.MainTab, 'push');
            app.StartButton.ButtonPushedFcn = createCallbackFcn(app, @StartButtonPushed, true);
            app.StartButton.Position = [350 183 100 22];
            app.StartButton.Text = 'Start';

            % Create StopButton
            app.StopButton = uibutton(app.MainTab, 'push');
            app.StopButton.ButtonPushedFcn = createCallbackFcn(app, @StopButtonPushed, true);
            app.StopButton.Position = [350 148 100 22];
            app.StopButton.Text = 'Stop';

            % Create PracticeOptionsPanel
            app.PracticeOptionsPanel = uipanel(app.MainTab);
            app.PracticeOptionsPanel.Title = 'Practice Options';
            app.PracticeOptionsPanel.Position = [62 118 243 128];

            % Create TempoBPMEditFieldLabel
            app.TempoBPMEditFieldLabel = uilabel(app.PracticeOptionsPanel);
            app.TempoBPMEditFieldLabel.HorizontalAlignment = 'right';
            app.TempoBPMEditFieldLabel.Position = [24 65 79 22];
            app.TempoBPMEditFieldLabel.Text = 'Tempo (BPM)';

            % Create TempoField
            app.TempoField = uieditfield(app.PracticeOptionsPanel, 'numeric');
            app.TempoField.Limits = [40 320];
            app.TempoField.RoundFractionalValues = 'on';
            app.TempoField.Position = [121 65 100 22];
            app.TempoField.Value = 120;

            % Create DurationminEditFieldLabel
            app.DurationminEditFieldLabel = uilabel(app.PracticeOptionsPanel);
            app.DurationminEditFieldLabel.HorizontalAlignment = 'right';
            app.DurationminEditFieldLabel.Position = [24 23 82 22];
            app.DurationminEditFieldLabel.Text = 'Duration (min)';

            % Create DurationField
            app.DurationField = uieditfield(app.PracticeOptionsPanel, 'numeric');
            app.DurationField.LowerLimitInclusive = 'off';
            app.DurationField.Limits = [0 60];
            app.DurationField.Position = [121 23 100 22];
            app.DurationField.Value = 0.1;

            % Create TimingGauge
            app.TimingGauge = uigauge(app.MainTab, 'linear');
            app.TimingGauge.Limits = [-1 1];
            app.TimingGauge.ScaleColors = [1 0 0;0 1 0;1 0 0;1 0.8667 0;1 0.8706 0];
            app.TimingGauge.ScaleColorLimits = [-1 -0.5;-0.05 0.05;0.5 1;-0.5 -0.05;0.05 0.5];
            app.TimingGauge.Position = [71 404 1021.984375 40];

            % Create ResultsTab
            app.ResultsTab = uitab(app.TabGroup);
            app.ResultsTab.Title = 'Results';

            % Create TimingPlot
            app.TimingPlot = uiaxes(app.ResultsTab);
            title(app.TimingPlot, 'Title')
            xlabel(app.TimingPlot, 'X')
            ylabel(app.TimingPlot, 'Y')
            app.TimingPlot.Position = [17 323 1134 377];

            % Create PlayheadSlider
            app.PlayheadSlider = uislider(app.ResultsTab);
            app.PlayheadSlider.Limits = [0 1];
            app.PlayheadSlider.MajorTicks = [];
            app.PlayheadSlider.ValueChangedFcn = createCallbackFcn(app, @PlayheadSliderValueChanged, true);
            app.PlayheadSlider.MinorTicks = [];
            app.PlayheadSlider.Position = [57 322 1085 3];

            % Create NextOnsetButton
            app.NextOnsetButton = uibutton(app.ResultsTab, 'push');
            app.NextOnsetButton.ButtonPushedFcn = createCallbackFcn(app, @NextOnsetButtonPushed, true);
            app.NextOnsetButton.Position = [469 137 100 22];
            app.NextOnsetButton.Text = 'Next Onset';

            % Create PreviousOnsetButton
            app.PreviousOnsetButton = uibutton(app.ResultsTab, 'push');
            app.PreviousOnsetButton.ButtonPushedFcn = createCallbackFcn(app, @PreviousOnsetButtonPushed, true);
            app.PreviousOnsetButton.Position = [345 137 100 22];
            app.PreviousOnsetButton.Text = 'Previous Onset';

            % Create PreviousTickButton
            app.PreviousTickButton = uibutton(app.ResultsTab, 'push');
            app.PreviousTickButton.ButtonPushedFcn = createCallbackFcn(app, @PreviousTickButtonPushed, true);
            app.PreviousTickButton.Position = [345 172 100 22];
            app.PreviousTickButton.Text = 'Previous Tick';

            % Create NextTickButton
            app.NextTickButton = uibutton(app.ResultsTab, 'push');
            app.NextTickButton.ButtonPushedFcn = createCallbackFcn(app, @NextTickButtonPushed, true);
            app.NextTickButton.Position = [468 172 100 22];
            app.NextTickButton.Text = 'Next Tick';

            % Create ResultsTextAreaLabel
            app.ResultsTextAreaLabel = uilabel(app.ResultsTab);
            app.ResultsTextAreaLabel.HorizontalAlignment = 'right';
            app.ResultsTextAreaLabel.Position = [627 172 46 22];
            app.ResultsTextAreaLabel.Text = 'Results';

            % Create ResultsTextArea
            app.ResultsTextArea = uitextarea(app.ResultsTab);
            app.ResultsTextArea.Position = [688 136 150 60];

            % Create SettingsTab
            app.SettingsTab = uitab(app.TabGroup);
            app.SettingsTab.Title = 'Settings';

            % Create SystemSettingsPanel
            app.SystemSettingsPanel = uipanel(app.SettingsTab);
            app.SystemSettingsPanel.Title = 'System Settings';
            app.SystemSettingsPanel.Position = [642 497 243 128];

            % Create SampleRateDropDownLabel
            app.SampleRateDropDownLabel = uilabel(app.SystemSettingsPanel);
            app.SampleRateDropDownLabel.HorizontalAlignment = 'right';
            app.SampleRateDropDownLabel.Position = [24 65 75 22];
            app.SampleRateDropDownLabel.Text = 'Sample Rate';

            % Create SampleRateDropDown
            app.SampleRateDropDown = uidropdown(app.SystemSettingsPanel);
            app.SampleRateDropDown.Items = {'44100', '48000'};
            app.SampleRateDropDown.Position = [120 65 101 22];
            app.SampleRateDropDown.Value = '44100';

            % Create BufferSizeDropDownLabel
            app.BufferSizeDropDownLabel = uilabel(app.SystemSettingsPanel);
            app.BufferSizeDropDownLabel.HorizontalAlignment = 'right';
            app.BufferSizeDropDownLabel.Position = [24 23 64 22];
            app.BufferSizeDropDownLabel.Text = 'Buffer Size';

            % Create BufferSizeDropDown
            app.BufferSizeDropDown = uidropdown(app.SystemSettingsPanel);
            app.BufferSizeDropDown.Items = {'128', '256', '512'};
            app.BufferSizeDropDown.Position = [120 23 101 22];
            app.BufferSizeDropDown.Value = '256';

            % Create MeasureAudioLagButton
            app.MeasureAudioLagButton = uibutton(app.SettingsTab, 'push');
            app.MeasureAudioLagButton.ButtonPushedFcn = createCallbackFcn(app, @MeasureAudioLagButtonPushed, true);
            app.MeasureAudioLagButton.Position = [398 562 120 22];
            app.MeasureAudioLagButton.Text = 'Measure Audio Lag';
        end
    end

    methods (Access = public)

        % Construct app
        function app = timingPractice

            % Create and configure components
            createComponents(app)

            % Register the app with App Designer
            registerApp(app, app.UIFigure)

            % Execute the startup function
            runStartupFcn(app, @startupFcn)

            if nargout == 0
                clear app
            end
        end

        % Code that executes before app deletion
        function delete(app)

            % Delete UIFigure when app is deleted
            delete(app.UIFigure)
        end
    end
end]]></w:t></w:r></w:p></w:body></w:document>